/**
 * @file
 * Navigation Styling
 */

@import "base";


/*
 * Markup generated by theme_menu_tree().
 */

ul li.expanded {
  @if $legacy-support-for-ie6 or $legacy-support-for-ie7 {
    *list-style-image: url(../images/menu-expanded.png);
  }
  list-style-image: inline-image("menu-expanded.png");
  list-style-type: circle;
}
ul li.collapsed {
  @if $legacy-support-for-ie6 or $legacy-support-for-ie7 {
    *list-style-image: url(../images/menu-collapsed.png); /* LTR */
  }
  list-style-image: inline-image("menu-collapsed.png"); /* LTR */
  list-style-type: disc;
}
ul li.leaf {
  @if $legacy-support-for-ie6 or $legacy-support-for-ie7 {
    *list-style-image: url(../images/menu-leaf.png);
  }
  list-style-image: inline-image("menu-leaf.png");
  list-style-type: square;
}

/*
 * The active item in a Drupal menu
 */

li a.active {
  color: #000;
}

/*
 * Mobile menu toggle button
 */

.nav-toggle,
.user-nav-toggle {
  display: block;
  width: 36px;
  height: 36px;
  overflow: hidden;
  text-indent: -500em;
  position: absolute;
  top: 35px;
     
  @media all and (min-width: 960px) {
    display: none;
  }
}
 
.nav-toggle {
  background: url(../images/nav-toggle.png) no-repeat;
  background-size: 100% 100%;
  right: 30px;
}
 
.user-nav-toggle {
  background: url(../images/user-nav-toggle.png) no-repeat;
  background-size: 100% 100%;
  left: 30px;
}


/*
 * Navigation bar
 */
#navigation {
  display: none;
  clear: both;
  margin: 0 -20px;

  position: relative;
  z-index: 3;
  
  font-family: $futura;
  font-size: 18px;
  letter-spacing: 1px;
  text-align: center;
  text-transform: uppercase;
  
  background: #221f20;
  background: rgba(0,0,0,0.4);
  @include box-shadow(rgba(0,0,0,0.5) 0 0 20px inset);


  @media all and (min-width: 960px) {
    display: block !important;
    margin: 50px -20px 0; // The minuses create a bit of flexibility for the likelihood of fallback fonts having wider characters
    background: none;
    box-shadow: none;
  }
  
  .block {
    margin-bottom: 0;
  }

  .block-menu .block-title,
  .block-menu-block .block-title {
    @include element-invisible();
  }

  .menu-name-main-menu > ul.menu { /* Menu block links */
    margin: 0;
    padding: 0;
    
    li {
      display: block;
      list-style-type: none;
      list-style-image: none;
      position: relative;
      
      @media all and (min-width: 960px) {
        display: inline-block;
      }
      
      a {
        display: block;
        padding: 13px 15px;
        text-decoration: none;
        color: $paper;
      }
      
      @media all and (max-width: 960px) {
        &.expanded > ul {
          background: rgba(255,255,255,0.1);
        }
  
        &.active-trail > ul {
          background: #171618;
          display: block;
        }
        
        & > a.active-trail,
        & > a.active {
          background: #171618;
          border-bottom: #2a292d 1px solid;
        }
      }
              
      // Expand button to open sub menus on mobile
      .expand-button {
        display: block;
        width: 45px;
        height: 45px;
        background: url(../images/open-close.png);
        background-size: 100% auto;
        overflow: hidden;
        text-indent: -500em;
        
        position: absolute;
        z-index: 2;
        top: 0;
        right: 0;
        cursor: pointer;
        
        &.open {
          background-position: 0 100%;
        }

        @media all and (min-width: 960px) {
          display: none;
        }
      }

      
      &> ul { /* Dropdown menus */
        // By default, the sub-menus should be closed
        display: none;
      }
                
      @media all and (min-width: 960px) {
        &> ul {
          display: none;
          width: 220px;
          position: absolute;
          top: 100%;
          left: 50%;
          margin-top: 0;
          margin-left: -110px;
          background: #5e7e84;
          @include box-shadow(rgba(0,0,0,0.5) 0 0 6px);
          @include border-radius(11px);
                  
          li {
            display: block;
          
            a {
              display: block;
              padding: 10px;
              color: $paper;
              border-bottom: 1px #415963 solid;
              
              &:hover {
                background: rgba(232,140,45,1);
              }
            }
            
            &:first-child a {
              border-radius: 11px 11px 0 0;
            }
            
            &:last-child a {
              border-radius: 0 0 11px 11px;
            }
  
          }
        }
      
        &:hover ul {
          display: block !important;
        }
      }
    }
    
    @media all and (min-width: 960px) {
      text-align: center;

      // Third child of the first level only
      &>li:nth-child(3) {
        margin-right: 360px;
      }
      
      // Primary links only
      &>li > a {
        //border-radius: 11px 11px 0 0;
        position: relative;
      }
      
      &>li:hover > a,
      &>li.active-trail > a,
      li.active > a {
        //background-color: $paper;
        //color: $brown;
      }
      
      &>li.active-trail > a:after,
      &>li.active > a:after,
      &>li.active-trail:hover > a:after,
      &>li.active:hover > a:after {
        content: "";
        display: block;
      	width: 0; 
      	height: 0; 
      	border-left: 20px solid transparent;
      	border-right: 20px solid transparent;
      	
      	border-top: 20px solid #36333a;
      	position: absolute;
      	left: 50%;
      	bottom: -20px;
      	margin-left: -20px;
      }
      
      &>li:hover > a:before {
        content: "";
        display: block;
      	width: 0; 
      	height: 0; 
      	border-left: 10px solid transparent;
      	border-right: 10px solid transparent;
      	
      	border-bottom: 10px solid $paper;
      	position: absolute;
      	left: 50%;
      	bottom: 0;
      	margin-left: -10px;
      	z-index: 1;
      }
      
      &>li.expanded:hover > a:before {    	
      	border-bottom: 10px solid #5e7e84;
      	bottom: 0;
      }      
    }
  }
}

.region-navigation {
}

/*
 * Main menu and Secondary menu links
 */

#main-menu {
}

#secondary-menu {
  clear: both;
  margin: 0 -20px;
  
  @media all and (max-width: 959px) {
    display: none;
    font-family: $futura;
    font-size: 18px;
    letter-spacing: 1px;
    text-align: center;
    text-transform: uppercase;

    background: #221f20;
    background: rgba(0,0,0,0.4);
    @include box-shadow(rgba(0,0,0,0.5) 0 0 20px inset);
  }
  
  @media all and (min-width: 960px) {
    display: block !important;
    font-size: 13px;
    float: right; /* LTR */
    margin-bottom: 40px;
    position: relative;
    top: 10px;
    right: 20px;
  }
  
  ul.links {
    margin: 0;
    
    li {
      display: block;
      list-style-type: none;
      list-style-image: none;
      position: relative;
      
      @media all and (min-width: 960px) {
        display: inline-block;
      }
      
      a {
        display: block;
        padding: 13px 15px;
        text-decoration: none;
        color: $paper;
        
        &.active {
          background: #171618;
          border-bottom: #2a292d 1px solid;
        }
        
        @media all and (min-width: 960px) {
          padding: 0;
          margin-right: 25px;
        }
      }
    }
  }
}

/*
 * Menu blocks
 */

.block-menu {
}

/*
 * "Menu block" blocks
 *
 * Drupal core has limited ways in which it can display its menus. To get around
 * these limitations, see http://drupal.org/project/menu_block
 */

.block-menu-block {
}
